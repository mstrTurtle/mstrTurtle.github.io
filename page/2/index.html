<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>mstrTurtle的生活智慧</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="mstrTurtle的生活智慧">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="mstrTurtle的生活智慧">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="mstrTurtle的生活智慧" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">mstrTurtle的生活智慧</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-math" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/18/math/" class="article-date">
  <time class="dt-published" datetime="2022-10-18T05:06:16.658Z" itemprop="datePublished">2022-10-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/18/math/">数学是一个永不会完成的创造过程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>撰文 | 夏尔·埃雷斯曼（Charles Ehresmann）</p>
<p>翻译 | 叶凌远</p>
<p>译者按</p>
<p>本文是夏尔·埃雷斯曼（Charles Ehresmann，1905-1979）于1966年4月25日在堪萨斯大学劳伦斯分校数学系荣誉晚宴上的演讲，同年发表于Cahiers de topologie et géométrie différentielle catégoriques(《范畴拓扑学与范畴微分几何》) 杂志，题目为“Trends toward unity in mathematics”。埃雷斯曼是一位在德国出生的法国数学家，他是布尔巴基学派的早期成员之一，在微分拓扑和范畴论等领域作出了重要工作。</p>
<p><img src="https://pics2.baidu.com/feed/fcfaaf51f3deb48fccd5fd9a1aeac5202cf57831.jpeg"></p>
<p>夏尔·埃雷斯曼</p>
<p>这篇文章简明地回顾了从古典时代到现代数学的发展历程，阐述了他对于采用范畴论的语言统一不同数学分支的设想。那时距范畴最初的概念在数学文献中正式出现不过21年的时间。到如今，将近60年的时间过去了，范畴论无论是在其自身还是在统一数学方面都有了长足的发展，因此埃雷斯曼文章所规划的蓝图与提出的问题不见得仍在现在的语境下适用。但范畴论发展所取得的成果却没有在更广泛的数学家群体中得到它应有的重视。翻译这篇几乎是60年前的文章，是希望和读者一起回到半个世纪之前，重新思考数学的本质、体会现代数学的思维方式。翻译整体遵照原文，对个别细节进行了修改，注释与粗体均为译者所加。</p>
<p>在常人眼中，数学结论经常被认为是永恒的真理，但数学不是由一成不变的定理所构成的；它也不仅仅产生了大量习题，在其他科学中有广泛的应用而已。数学是一门生动的科学，在持续不断地向前快速发展。我们所处的年代正是数学极速扩张的时代；并且现在，也有一股重要的力量推动着数学迈向统一。</p>
<p>同样的发展导致了新文学的出现——小说不必再有情节；诞生了抽象音乐，有时是由计算机谱写；还有抽象的雕塑和绘画，它们并不旨在呈现真实事物的一般表象。这种同样的抽象过程也发展出了一种新的数学，其动机不在于寻找可能的应用，而是基于我们一种强烈的愿望——希望知晓每一个问题的本质和它所依赖的整体结构。这种一致并不令人惊讶，毕竟数学与艺术非常相似：数学理论不仅需要严格性，还要满足我们对简洁、和谐和美的追求；一个优美的理论和一件艺术品一样，它们都是人类灵感的创造。</p>
<p>对于那些数学家中的柏拉图主义者，他们工作的动机是要寻找给定情景下真实的结构，以及这些结构的抽象表示。对更务实的数学家来说，他努力的目标是用他所掌握的一切手段去解决纯数学或应用数学中出现的预先给定的问题；在此过程中，他会尽可能避免引入新的一般概念。而所有数学家都会认同的是，如果一项数学工作能够激发新的研究产生，那么它在数学中的价值就能得到最好的证明；数学最重要的应用恰恰应是数学本身。</p>
<p>直到最近，大多数哲学家，甚至柏格森[1]，都把数学说成是一门与日常空间中的数与量有关的科学。这个描述或多或少对应着古希腊的数学，但现代数学已不再是如此了。</p>
<p>对希腊人来说，数学代表着算数（Arithmetics）和几何学（Geometry）。前者是关于自然数的科学，后者研究的是日常空间中图形的形状和几何量的比例。尽管他们的几何学是一个公理化的体系，但他们认为这些公理是被“证据”所强加的。事实上，他们在推理中所隐含的假设比明确说明的公理更多。令人惊讶的是，他们从未引入实数的概念，尽管欧多克索斯[2]的比例论与20多个世纪后由戴得金[3]给出的实数定义没有本质上的区别。这种把以前已知的某一类对象——在这里则是一类有理数——作为一个新的对象的抽象过程，对他们的思想来说是完全陌生的。即使是开创了诸如静力学（Statics）和流体力学（Hydrodynamics）等新领域并为积分理论开辟道路的阿基米德，也不愿意抽象地定义实数。在他之后，创造的冲动似乎被耗尽了，而数学在整个中世纪都处于沉睡之中。</p>
<p>数学创造力的复兴还要归功于16世纪意大利数学家引入的新数字，包括负数和虚数，以及同一时期韦达[4]所引入的代数符号。希腊人也有一种基于几何的代数，但他们没有引入任何代数符号，导致他们的作品难以阅读。</p>
<p>笛卡尔和费马也为数学带来了新的推动力，他们创立的解析几何统一了代数和几何。尽管曲线切线的定义问题，以及如何寻找一条曲线的切线等问题已经在非常特殊的情况下得到解决（例如阿基米德的螺旋线），但现在我们可以用一种有效的方式对它们进行研究，这也直接导致牛顿和莱布尼茨发明微积分。莱布尼茨似乎已经猜到了许多未来数学的发展。他不仅明确地将函数作为对象引入数学，从而为泛函分析奠定基础；而且在他尚未实现的通用表意文字（universal characteristics）理论中[5]，他梦想着揭示所有事物的代数结构，并构造一种普世的算法来进行表达和推理。因此，他不满足于笛卡尔的解析几何学，因为它依赖于坐标系的选取。或许是在困惑中，他预见到了几何学必定拥有一种内蕴的代数结构，而线性代数和格拉斯曼代数（编者注：参见《格拉斯曼: 扩展的学问与线之代数丨贤说八道》）可以说部分地实现了他的这个梦想。不幸的是，他所处的时代并不能接受他过于超前的思想，他没有足够的追随者来发展他所设想的道路。不过他在微积分方面的工作被广泛地采用了，特别是他所创立的微分和积分的符号。而微积分也在很长一段时间内成为数学的一个主要的领域。</p>
<p>19世纪由罗巴切夫斯基和亚诺什[6]分别独立发现的非欧几里得几何学是另一进步。截止那时，古典时代为数学所设下的所有界限都被打破了：（欧几里得）几何学不再是由感知经验所强加给我们的，其所依赖的是人类基于公理的创造；我们可以设想不同的公理系统来研究不同的几何学。康德所强调的我们对于空间概念的“先验性（a priori）”由此变得过时了[7]。那么，几何学的本质到底是什么？在当时，人们将一个具有传递性群作用的空间作为几何的统一性概念，例如欧几里得空间的传递群作用事实上就是欧几里得平移变换。因此，几何学成为一个群作用的不变量和共变体的理论。但实际上，这个定义只适用于齐性空间中的几何学，而其他类型的几何已被发现，人们感到有必要对几何和空间的概念进行另外的概括。这最终导致了拓扑空间的定义，它是回答所有关于连续性、极限和近似问题的恰当语境，也使得分析和几何领域中许多共同的结构得以显现。</p>
<p>在同一时期，康托尔[8]的集合理论出现了，并愈发成为所有数学分支统一的基础理论。这是数学中一种新的抽象方式。如康托尔所说，从那时开始“数学的发展就是完全自由的了”，集合论中的概念“只要求不矛盾，并与之前引入的概念通过精确的定义相联系即可”。尽管不久之后，人们发现了一些危及康托尔集合理论的悖论，从而危及整个数学大厦，但康托尔的杰作开启了现代数学思维之路。</p>
<p>自本世纪初以来[9]，数学理论中创造的自由使得人们在集合上考虑了许多新的数学结构。除了各种类型的代数结构（如群、环、域、半群、模、代数、李代数等），还有许多测度和概率模型结构以及对各种各样的拓扑结构的精细化：均匀结构、度量空间、拓扑流形、具有各种微分结构的可微或分析流形，如黎曼流形及其上的联络、代数流形等。考虑同一集合上的不同结构可以构造新的数学对象，如李群、拓扑向量空间、巴拿赫空间、希尔伯特空间、赋范代数，等等。这些结构的引入主要是为了满足纯数学发展的需要，而一旦它们被更多的人所了解，它们在其他领域的应用自然会越来越多，运用数学理论的人也会越来越多。</p>
<p>在引入所有这些不同类型的数学结构之后，人们深切地感受到了统一的必要性；经过一段快速扩张的时期，如果没有一种统一的理论将各个领域联系起来，那么一个无法阻挡的趋势便是，不同的数学家们将和巴别塔的建造者们一样，使用不同的、不相容的数学语言发展各自的领域。</p>
<p>考虑到这些理论的相似性，我们可以通过对结构这一概念，或者更确切地说，集合上某一特定种类的结构的一般性定义得到某种统一。这一思想是由布尔巴基学派[10]发展而来，也是他们编撰的系列教材《数学原本》（léments de mathématique）中内容顺序的编排基础。在数学研究的最开始就被广泛考虑的整数和欧几里得空间这两种结构，一旦被公理化地定义，就非常确定地对应着集合上某一种结构，即所有满足此类结构的对象都是同构的。但现代数学所引入的集合上的不同结构类别（例如群或拓扑结构）并不具有这种唯一性。</p>
<p>集合上一般结构的理论可以用范畴和函子的概念来进行更加普遍的公理化，而范畴论的发展似乎是当今数学最具特色的一种统一的趋势；基于此，我认为它很快就会像其他基础领域一样，如线性代数和拓扑学，在大学早期就被教授。[11]</p>
<p>一个范畴是由一族元素和在它们之上部分定义的复合操作所构成的[12]，同时复合需要满足一定的规则（公理）。例如，每一个群都是一个特殊的范畴，复合操作和群的乘法一致，这使得其中每个元素在这个复合操作下都是可逆的，且只有一个单位元；但最典型的例子还是所有集合间的函数所构成的范畴，其中的一个元素是两个集合之间的一个映射，复合操作则和通常函数之间的复合相一致。抽象范畴的公理化正是基于这个由集合之间的映射构成的范畴所提出的。我们把范畴中一个元素叫作一个态射，而不称其为函数，可以将其想象为从一个物体（态射的源）到另一个物体（态射的靶）的一个箭头。因此，范畴论中态射的一般概念是函数概念的推广，而函数被戴德金认为是数学的基本工具。</p>
<p>函子是范畴之间保持复合操作的映射。它们再次构成了一个范畴，即函子的范畴。对于我们通常所考虑的集合上附加的某种数学结构，它们之间的同态也构成一个范畴。对于所有的这些范畴都可以自然地定义一个函子，映射到之前所述的集合之间的函数所构成的范畴[13]；这通常被称为遗忘函子（forgetful functor），即在这个函子的作用下我们忘记了集合上其它的结构，仅仅保留了最基本集合的信息。例如，所有拓扑空间之间的连续映射构成的范畴，亦或是所有群同态所构成的范畴，都有如上所述的遗忘函子。</p>
<p>现在，我们可以更抽象地考虑从范畴H到范畴C的任意一个函子p。根据上面的讨论，在这个语境下，我们则可以将H的任意一个物体S看作是相对于函子p的一个结构，或更确切地说是C范畴中的物体p(S)上的一个p-结构。因此，H可以看作是C上的p-结构所构成的范畴。令人惊讶的是，许多有关集合上某种特定结构的理论和构造可以被如上所述有关 p-结构的一般理论所统一起来。我们可以在这个框架下定义子结构、商结构、自由结构、笛卡尔积、一族物体的和，或更为广泛的任意一个函子的极限和余极限，等等。目前我相信，现在的数学研究将会更少地关心单个p-结构的性质，甚至也不会那么关心某一个函子p的性质；相反，现在数学的目标应该是研究某一族函子的性质，使得曾经对于某一特定函子p和其对应的p-结构成立的定理，现在对于这一族中任意的函子都成立。一旦理解了这个定理有效的真正原因，我们一般会发现，只有很少的一些条件（假设）是证明这个定理所真正必要的。因此，原来定理的证明如今可以推广到一类非常广泛的函子上，而不仅仅只对原本的p函子适用。特别地，这个定理可能会包含许多已知的函子，从而应用于我们从未想过的领域。例如，有关拓扑空间的紧致化，均匀空间的完备化，自由群、自由模或更一般的由一个集合生成的自由代数的构造，都可以看作是某一类抽象的函子自由结构存在性定理的推论。</p>
<p>当然，上述对数学进行统一的方案过于粗略。事实上，只有数学家们的创造力才能持续地发现新的有趣的函子类。如我们所见，在数学中，创造过程的一个特点是把以前定义的一类对象作为一个新的数学对象来加以认识。当我们开始研究不同函子的分类及其性质来梳理统一现有的数学理论时，我们是否在这个更高的层次面临着相同的问题？一旦这个新理论走向成熟且再次变得复杂、纠缠不清，我们是否有必要发展更高程度的统一理论？我们不试图回答这个问题。然而，我们愈发深刻地认识到，数学是一个永不会完成的创造过程，它的存在性并不需要通过它的重要性或是不断扩大的应用范围来证明；它的意义远远不仅是充当“物理学的推土机”。数学是理解整个宇宙的关键，统一了人类从科学到哲学到形而上学的所有的思维。因此，柏拉图和莱布尼茨的伟大理想，即让数学成为一切知识本质的理想，可能终将实现。</p>
<p>注释</p>
<p>[1] 亨利·柏格森 (Henri Bergson, 1859-1941)，法国哲学家，文学家，于1927年凭借丰富、富有活力的思想和语言获得诺贝尔文学奖（译者注；全文所有的脚注均为译者所加，后不再一一指明）。</p>
<p>[2] 欧多克索斯（Eudoxus，408 B.C.–355 B.C. ），古希腊数学家、天文学家，欧几里得《几何原本》中的许多内容很有可能是来源于欧多克索斯，一些人认为他是古希腊最杰出的数学家。</p>
<p>[3] 里查德·戴得金（Richard Dedekind，1831-1916），德国数学家，在数论、抽象代数（特别是环论）以及算数的公理化等领域作出非常重要的贡献。</p>
<p>[4] 弗朗索瓦·韦达（Franois Viète，1540-1603），法国数学家，初高中生们熟悉的韦达定理就来源于他。</p>
<p>[5] 通用表意文字 （拉丁语为characteristica universalis），是莱布尼茨所设想的一种通用的形式化语言，该语言能够表达数学、科学以及形而上学等方面的概念，并支持一种通用的逻辑演算。</p>
<p>[6] 尼古拉·罗巴切夫斯基（Nikolai Lobachevsky，1792-1856 ），俄国数学家；鲍耶·亚诺什（János Bolyai, 1802-1860），匈牙利数学家，他们和高斯生活在同一时代。两人均独立的为非欧几何，特别是双曲几何，作出了重要贡献。</p>
<p>[7] 康德认为人类对时间和空间的认识不是通过概念化（conceptualisation）的方式完成的，它们是我们感观直觉的纯粹形式（pure form of sensible intuition）。非常粗略地来说，前者涉及知性（understanding）的运作，而后者形成的知识则是先验的。</p>
<p>[8] 格奥尔格·康托尔（Georg Cantor，1845-1918），是出生于俄国的德国数学家，创立了现代集合论，是实数的严格定义及整个微积分体系的理论基础，为数学基础（foundation of mathematics）作出了杰出的贡献。</p>
<p>[9] 这里指本文成文的时间，即20世纪。</p>
<p>[10] 尼古拉·布尔巴基（Nicolas Bourbaki）是20世纪一群法国数学家的共同笔名，他们自1935年开始撰写一系列关于现代高等数学的书籍，以把所有数学建立在集合论坚实的基础之上为目的。在这个过程中，他们致力于将数学概念尽可能地普遍化和严谨化， 对20世纪之后的数学发展产生了深刻的影响。</p>
<p>[11] 范畴论最早起源于1945年Eilenberg和MacLane 的题为General Theory of Natural Equivalences的论文，在随后的几十年内作为一门数学语言和工具迅速地参与到各个数学分支的发展之中。遗憾的是，本文作者埃雷斯曼的这一猜测直到多年后的今天也没能在大多数的大学内成为现实。</p>
<p>[12] 在现代的范畴论语言中，一般把范畴定义为两种类别的元素，即物体和它们之间的态射，所构成的数学对象；但也可以仅仅将一个范畴理解为一族态射加上上面部分定义的复合操作，因为范畴中的物体和单位态射是一一对应的。换句话说，态射的信息包含了物体的信息。本文对范畴所采取的是后一种理解。</p>
<p>[13] 即把一个同态看作是其对应的集合之间的函数。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/10/18/math/" data-id="cl9dqw5m30001yoju8i6cdg4h" data-title="数学是一个永不会完成的创造过程" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9D%82%E6%84%9F/" rel="tag">杂感</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-wisdom" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/17/wisdom/" class="article-date">
  <time class="dt-published" datetime="2022-10-17T15:23:46.108Z" itemprop="datePublished">2022-10-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/17/wisdom/">生活中的智慧</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>叙事  2020-06-09</p>
<p>曾经我问过爸爸，什么是智慧？哪里有智慧？爸爸告诉我：“生活中处处都有智慧。”那时, 我还是不怎么明白。</p>
<p>有一次，奶奶在厨房准备午饭，我便待在那看。只见奶奶淘了米后，把淘米水放在一旁，便去择菜了。我不禁问道：“奶奶，淘米的水都变白了，怎么不倒掉呢？”“淘米水用处可多啦！”奶奶说，“淘米水不仅可以洗碗洗菜，还可以洗脸呢，它有美容养颜的功效！”。“洗脸？”我有些半信半疑。这时，奶奶用淘米水洗起了菜，洗完菜后，又把水拿来浇花。“你看你这样一水多用，多节约呀！”奶奶又对我说。</p>
<p>除了一水多用，奶奶平常还会把一些塑料袋存起来，当垃圾袋使用。虽然奶奶没有读过很多书，但在生活上，有自己的小智慧。不仅在节约上有智慧，身边一些不起眼，但使我们更方便的东西，也是因为智慧。以前，我一直觉得爷爷那电瓶车的银色垫子没什么用，只是为了美观罢了。但实际上，夏天也会发挥很大的作用，它能使坐垫不会被太阳晒得滚烫。这是为什么呢? 老师说：“这是因为垫子是银色的，表面很光滑，反射光的本领特别强，吸热本领就弱了，所以它在太阳下升温就比较慢，同样，白色吸热本领也弱，因此，夏天人们都喜欢穿白色衣服，这些都是智慧与科学的力量。”</p>
<p>原来生活中真的处处都有智慧，智慧的力量是如此的强大！它既可以节约资源，保护环境，又可以使我们的生活更方便。只要我们用心去观察，去实践，去发掘，就能发现智慧无处不在！</p>
<p>点评：能够选择生活中具有典型意义的题材，事件的代表性较强。Array。情节波折性较强，于平常之中生意外，能引起读者的注意。全文叙事集中，不枝不蔓，语言朴实流畅，感情真挚感人。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/10/17/wisdom/" data-id="cl9dqw5tf0002yoju6pah4rdw" data-title="生活中的智慧" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9D%82%E6%84%9F/" rel="tag">杂感</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/17/hello-world/" class="article-date">
  <time class="dt-published" datetime="2022-10-17T15:16:29.626Z" itemprop="datePublished">2022-10-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/17/hello-world/">做一个幸福的人</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>周记  2021-10-21</p>
<p><img src="/image/wisdom/hehua-striped.png" alt="hehua-striped"></p>
<p>如果人生是鱼，那么幸福就是水；如果人生是飞鸟，那么幸福就是天空；如果人生是蜜蜂，那么幸福就是花朵。人生离不开幸福，没有幸福的人生是毫无意义的人生</p>
<p>有这样一些幸福的人，他们有自己的兴趣和爱好，他们过着自由自在无拘无束的生活。徐霞客一生浏览无数大好河川，感受到了山人合一的自由，这就是他的幸福；陶渊明不愿在昏暗无边的官场上活着，他要到田园里尽情享受那“采菊东篱下，悠然见南山”的悠闲，这就是他的幸福。其实，幸福来的很简单：只要你做自己喜欢的事，还要在道德和法律允许的范围内进行体验幸福生活的情趣，就会成为一个幸福的人。</p>
<p>有这样一些幸福的人，他们用自己的努力来造福人类，使人们的生活更加美好。诺贝尔看见劳动的工人太辛苦，下决心要帮助他们，于是埋头苦干，刻苦钻研，在实验室里花四年时间，试验一百多次，最终发明了对人类作用巨大的火药。当他发明出火药时，幸福感布满了他的全身，因为他能用他的努力来造福人类。其实，幸福来的很简单：只要你用自己的努力一心一意的来帮助别人，就会成为一个幸福的人。</p>
<p>有这样一些幸福的人，他们背负着各种各样的责任，使自己努力完成自己的使命。岳飞作为国家危亡时的得力将领，他有责任在边疆奋勇杀敌，收复失地，甚至为国捐躯。这种责任感使他一往无前，完美地演绎着一场场胜利，看着这一块块失而复明得的土地时，幸福也一块块地充斥着他的心中。其实，幸福经常来的很简单：只要你背负着使命与责任，并且把它化为前进的动力，你就会成会一个幸福的人。</p>
<p>人生离不开幸福，要牢记上述的幸福要诀，做一个幸福的人。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/10/17/hello-world/" data-id="cl9dqw5k50000yoju80ndgrd6" data-title="做一个幸福的人" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9D%82%E6%84%9F/" rel="tag">杂感</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-cpp-encoding" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/01/14/cpp-encoding/" class="article-date">
  <time class="dt-published" datetime="2022-01-13T16:00:00.000Z" itemprop="datePublished">2022-01-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/01/14/cpp-encoding/">c++编译中的乱码分析</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>源自我的知乎回答: <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/421326588/answer/1738490344">c++出现中文乱码怎么解决？</a></p>
<h1 id="A-对g-编译器的常见解决方法"><a href="#A-对g-编译器的常见解决方法" class="headerlink" title="A. 对g++编译器的常见解决方法"></a>A. 对g++编译器的常见解决方法</h1><p>如果你用的是g++编译器，而且跑在cmd里，在最常见的情况下，只要在程序的开头切换cmd的字符编码即可（对于更复杂的情况，可参见后文说明）：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;chcp 65001&quot;</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;这是汉字&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个chcp 65001是一句cmd指令，用来把终端的活动页(So called “Code Page”)切换成UTF-8（所谓的CP 65001）。 换句话说，它指示终端，把传入的字节流，按UTF-8来翻译。</p>
<h1 id="B-乱码原因的解释，以及g-情况的分析"><a href="#B-乱码原因的解释，以及g-情况的分析" class="headerlink" title="B. 乱码原因的解释，以及g++情况的分析"></a>B. 乱码原因的解释，以及g++情况的分析</h1><p>为什么它会显示乱码呢，请看以下解释：</p>
<h2 id="B1-讨论编译使用的三个字符集："><a href="#B1-讨论编译使用的三个字符集：" class="headerlink" title="B1. 讨论编译使用的三个字符集："></a>B1. 讨论编译使用的三个字符集：</h2><p>所谓字符集，就是同一种信息的不同表示（比如，复数的本质就是数系中一个数，但可以用坐标、相角、自然数指数这三种办法表示）。换句话说，信息就是信息，而编码是“约定”。同样的，你的源文件、编译器运行时内存中、编译后生成的二进制可执行文件，三者之中的“字符串”编码，都是同一种信息的不同表示。</p>
<p>那么，编译字符集分成三个部分：“源码字符集”、“编译器字符集”、“执行字符集”。编译器编译时，把源码的表示转成编译器内部的表示，然后又转成最后二进制表示。而当程序运行，直接向标准输出流输出（也就是cout, printf干的事情），实际上是把二进制表示的那堆东西直接塞进终端里了。</p>
<h2 id="B2-讨论终端字符集、编辑器字符集："><a href="#B2-讨论终端字符集、编辑器字符集：" class="headerlink" title="B2. 讨论终端字符集、编辑器字符集："></a>B2. 讨论终端字符集、编辑器字符集：</h2><p>终端和编辑器，接收的都是编码后的字节流，并且通过配置中的字符集选项（有些编辑器会根据字节流特征，去猜测字符集），来对字节流进行翻译。但凡它们没有配置正确，翻译流程就会出错，看到的东西就是乱码了（毕竟你可以把屏幕上出现的字样，也当做一种“表示”）。</p>
<p>承接上文，终端收到字节流，按终端配置的字符集来翻译这字节流。如果对不上，则乱码就产生了。</p>
<h2 id="B3-对于C-语言标准本身："><a href="#B3-对于C-语言标准本身：" class="headerlink" title="B3. 对于C++语言标准本身："></a>B3. 对于C++语言标准本身：</h2><p>如果足够留心，会发现C++11之后，语言标准中出现了u8，u16，u32这样的字符串前缀。它的意思就是，指示编译器，将字面量转成对应编码（如utf8，utf16，unicode这三种），放在二进制可执行文件中。当然了，转换成功的前提，是你正确指示了源码字符集。</p>
<h2 id="B4-回到g-，分析它的典型情形，以及它的特别功能："><a href="#B4-回到g-，分析它的典型情形，以及它的特别功能：" class="headerlink" title="B4. 回到g++，分析它的典型情形，以及它的特别功能："></a>B4. 回到g++，分析它的典型情形，以及它的特别功能：</h2><p>g++默认当你输入的是UTF-8格式（即源码字符集），编译时翻译后，又默认把它按UTF-8编码硬编码抄进二进制文件里（即二进制字符集）。但是当你把它打进终端，终端用的是默认的ANSI（在中文系统里也就是GBK了）翻译方案做的翻译，编码标识都不一致，出现乱码也就不奇怪了。</p>
<p>事实上，对于g++，可以明确地指定编译器的“源码字符集”，以及“执行字符集”（编译器内部表示，我们是管不着了）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">g++ -finput-charset=GBK main.cpp -o main.exe</span><br><span class="line">g++ -fexec-charset=GBK main.cpp -o main.exe</span><br></pre></td></tr></table></figure>
<p>请看上面代码块，-finput-charset&#x3D;GBK, -fexec-charset&#x3D;GBK，这两个选项就是在指定“源码字符集”、“执行字符集”。</p>
<h2 id="B5-形式化地描述这个过程"><a href="#B5-形式化地描述这个过程" class="headerlink" title="B5. 形式化地描述这个过程"></a>B5. 形式化地描述这个过程</h2><p>下图中，<br> 代表消息，给<br> 裹上<br> 代表编码，去掉一层<br> 代表解码。<br> 表示<br> 中信息的状态为<br> 。</p>
<p>见上图，Editor编辑器中，信息M没有编码。而Source源文件，只是传递过程中的东西，它被编码了一次（裹了一层F），到了编译器Compiler，需要把F剥下来，即解码。然后又包裹F，即编码。编译器输出的字面量Literal，在执行时不会被解码（即没有把F剥掉），原样地变成了字节流ByteStream，又到Terminal，此时F被剥掉了，即解码。</p>
<h1 id="C-对Visual-Studio情况的分析"><a href="#C-对Visual-Studio情况的分析" class="headerlink" title="C. 对Visual Studio情况的分析"></a>C. 对Visual Studio情况的分析</h1><h2 id="C1-一个常见的情况："><a href="#C1-一个常见的情况：" class="headerlink" title="C1. 一个常见的情况："></a>C1. 一个常见的情况：</h2><p>用代码里的字符串写一个文本文件，然后指定文本编辑器，让它用UTF-8打开，发现乱码了。</p>
<p>这是因为，visual studio默认把源码当成ANSI编码的（对于大陆用户，ANSI一般就是GBK），且二进制可执行文件中，默认放的也是ANSI。程序执行的时候，又把ANSI编码的字节流塞进文件里了，用户又用UTF-8打开，于是造成乱码。</p>
<h2 id="C2-Visual-Studio的特别性质："><a href="#C2-Visual-Studio的特别性质：" class="headerlink" title="C2. Visual Studio的特别性质："></a>C2. Visual Studio的特别性质：</h2><p>1，VS这个编辑器，创建新文件后，默认保存的文件格式是ANSI。但可以通过“文件”-“保存为编码”来保存成其他编码（西欧，GBK，UTF-8等）。</p>
<p>2，Visual Studio默认使用Visual C++作为编译器。此编辑器默认将源码文件当做是ANSI编码的。最近的实验特性也可以手动调成UTF-8。此时需要注意，你指示它，把你的源码当成UTF-8，那么你的源文件表示，也得真的是UTF-8。这需要通过第一点中提到的保存方法来完成。</p>
<h1 id="D-运行时编码转换的操作"><a href="#D-运行时编码转换的操作" class="headerlink" title="D. 运行时编码转换的操作"></a>D. 运行时编码转换的操作</h1><p>在代码运行时，二进制字符表示有问题，终端又调不了字符集，此时也是有办法的。</p>
<h2 id="D1-Windows下的编码转换："><a href="#D1-Windows下的编码转换：" class="headerlink" title="D1. Windows下的编码转换："></a>D1. Windows下的编码转换：</h2><p>windows.h中有个现成的（能直接把ANSI翻成指定编码）</p>
<p>win10最近有个叫ICU的，不过如果用这个的话要添加库依赖了，因为并不是标准库的组件。</p>
<h2 id="D2-Linux下的编码转换："><a href="#D2-Linux下的编码转换：" class="headerlink" title="D2. Linux下的编码转换："></a>D2. Linux下的编码转换：</h2><p>而linux下有iconv。</p>
<h1 id="E-对unicode的进一步的讨论"><a href="#E-对unicode的进一步的讨论" class="headerlink" title="E. 对unicode的进一步的讨论"></a>E. 对unicode的进一步的讨论</h1><h2 id="E1-操作系统现状"><a href="#E1-操作系统现状" class="headerlink" title="E1. 操作系统现状"></a>E1. 操作系统现状</h2><p>linux中的文件，普遍用的是UTF8，这是很好的；但终端编码五花八门。想要检测它，也不是容易的事情（debian用的是C.UTF8，但其它系统懒得跟进）。而至于windows，win10的系统设置里有个beta选项，让windows默认用utf-8，但打开了的话，很多中文软件会出现乱码问题。</p>
<h2 id="E2-UTF-8的优缺点"><a href="#E2-UTF-8的优缺点" class="headerlink" title="E2. UTF-8的优缺点"></a>E2. UTF-8的优缺点</h2><p>utf8，作为一种设计得很聪明的字符编码，其实用在匹配，存储等方面时，它的性质是很良好的。也就是说，你用std::string来存utf8，匹配子串的时候可以直接用标准库自带的版本。对于遍历字符串，或者字数统计的情形，这种变长编码就得自己想办法解决，此时确实比不上多字节，但遇到的机会是比较少的。</p>
<h2 id="E3-扩展阅读"><a href="#E3-扩展阅读" class="headerlink" title="E3. 扩展阅读"></a>E3. 扩展阅读</h2><p>关于Unicode的具体知识，可以参照Victor Stinner的著作Programming with Unicode，里面讨论了一般的Unicode话题，以及主流操作系统和几门编程语言中的相关工具和API。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/01/14/cpp-encoding/" data-id="clesjeehp0000sgju842k2pa4" data-title="c++编译中的乱码分析" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E7%A0%81/" rel="tag">编码</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenGL/" rel="tag">OpenGL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/" rel="tag">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/haskell/" rel="tag">haskell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91/" rel="tag">并发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E6%84%9F/" rel="tag">杂感</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A0%81/" rel="tag">编码</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 20px;">C++</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/OpenGL/" style="font-size: 10px;">OpenGL</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/haskell/" style="font-size: 10px;">haskell</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 10px;">并发</a> <a href="/tags/%E6%9D%82%E6%84%9F/" style="font-size: 20px;">杂感</a> <a href="/tags/%E7%BC%96%E7%A0%81/" style="font-size: 15px;">编码</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/03/03/inputmethod/">Win10控制台应用IME研究</a>
          </li>
        
          <li>
            <a href="/2023/03/03/encoding/">字符编码的历史与dotnet的做法</a>
          </li>
        
          <li>
            <a href="/2023/03/03/saga-agenda/">YouTube Saga视频的Agenda</a>
          </li>
        
          <li>
            <a href="/2023/03/03/jboss/">JBoss社区好的东西</a>
          </li>
        
          <li>
            <a href="/2023/01/15/cond-variable/">对条件变量cv的思考</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>